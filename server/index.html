<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

		<!--<link rel="stylesheet" type="text/css" href="player.css">-->
		<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
		<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

		<script src="/socket.io/socket.io.js"></script>
		<script>
		  var socket = io('http://localhost:8000');
		  socket.on('news', function (data) {
		  	var logDiv = document.getElementById("log");
				logDiv.innerHTML = data.message;
		  });

			function stop() {
				socket.emit('stop');
			}

			function start() {
				socket.emit('play', document.getElementById("source").value);
			}
		</script>
		<script>
			var IP_ADDRESS = "192.168.0.105";

			function checkPlayer() {
				if(isPlayerRunning())
					printTitle(getSongInfo());
				else
					printTitle("Nem megy semmi");
			}

			function printTitle(text) {
					document.getElementById('title').innerHTML = "<p>" + text + "</p>";
			}

			function getSongInfo() {
				return sendCommand("songname");
			}

			function isPlayerRunning() {
				return sendCommand("checkstatus") == "1";
			}

			function sendCommand(ID) {
				var xmlHttp = new XMLHttpRequest();
				xmlHttp.open( "GET", "http://" + IP_ADDRESS + "/player.php?command=" + ID, false );
				xmlHttp.send( null );
				var resp = xmlHttp.responseText;
				//document.getElementById('debug').innerHTML = resp;
				return resp;
			}

			$(document).ready(function() {
				checkPlayer();
				window.setInterval(function () {checkPlayer()}, 1000);
			});
		</script>
	</head>
	<body>
		<input type="text" id="source" value="test.mp3">
		<button onclick="start()">Start</button>
		<button onclick="stop()">Stop</button>
		<div id="log">
				
		</div>
		<div id="player" class="container" role="main">
			<div id="title" class="well"></div>
				<p>
					<div class="btn-group">
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="seek_minus_600"><span class="glyphicon glyphicon-fast-backward"></span></button>
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="seek_minus_30"><span class="glyphicon glyphicon-backward"></span></button>
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="pause"><span class="glyphicon glyphicon glyphicon-play"></span></button>
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="exit"><span class="glyphicon glyphicon glyphicon-stop"></span></button>
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="seek_plus_30"><span class="glyphicon glyphicon-forward"></span></button>
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="seek_plus_600"><span class="glyphicon glyphicon-fast-forward"></span></button>
					</div>
				</p>
				<p>
					<div class="btn-group">
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="decrease_volume"><span class="glyphicon glyphicon-volume-down"></span></button>
						<button type="button" class="btn btn-primary"  onclick="sendCommand(this.id)" id="increase_volume"><span class="glyphicon glyphicon-volume-up"></span></button>
					</div>
				</p>
				
					<!--<td><img onclick="sendCommand(this.id)" id="seek_minus_600" src="player_images/back_large.png"></td>
					<td><img onclick="sendCommand(this.id)" id="seek_minus_30" src="player_images/back_small.png"></td>
					<td><img onclick="sendCommand(this.id)" id="pause" src="player_images/pause.png"></td>
					<td><img onclick="sendCommand(this.id)" id="exit" src="player_images/stop.png"></td>
					<td><img onclick="sendCommand(this.id)" id="seek_plus_30" src="player_images/forward_small.png"></td>
					<td><img onclick="sendCommand(this.id)" id="seek_plus_600" src="player_images/forward_large.png"></td>-->
<!--					<td></td>
					<td></td>
					<td><img onclick="sendCommand(this.id)" id="decrease_volume" src="player_images/volume_down.png"></td>
					<td><img onclick="sendCommand(this.id)" id="increase_volume" src="player_images/volume_up.png"></td>
					<td></td>
					<td></td>-->
<!--		$mapping['previous_audio'] = 'j'; 
		$mapping['next_audio'] = 'k';-->
<!--		$mapping['previous_subtitle'] = 'n';
		$mapping['next_subtitle'] = 'm';
		$mapping['toggle_subtitle'] = 's';-->
		</div>
		<!--<div id="debug"></div>-->
	</body>
</html>
